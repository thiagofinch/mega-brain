---
phase: 10
plan: 02
type: execute
wave: 2
depends_on:
  - plan: 10-01
    provides: "Updated classifier with 0 REVIEW items and stale files marked DELETE"
files_modified:
  - docs/audit/AUDIT-REPORT.json
  - docs/audit/AUDIT-REPORT.md
  - docs/audit/VALIDATION-REPORT.json
  - docs/audit/VALIDATION-REPORT.md
autonomous: true
requirements:
  - AUDIT-01
  - AUDIT-03
  - AUDIT-04
must_haves:
  truths:
    - "All git-tracked DELETE candidates are removed from the repository"
    - "audit_layers.py report shows 0 REVIEW items and 0 DELETE items"
    - "validate_layers.py produces PASS with 0 hard violations, 0 soft warnings, and 0 review tracked"
    - "Reports are idempotent — regenerating produces identical summaries"
  artifacts:
    - path: "docs/audit/AUDIT-REPORT.json"
      provides: "Machine-readable audit with 0 REVIEW"
      contains: "REVIEW.*0"
    - path: "docs/audit/AUDIT-REPORT.md"
      provides: "Human-readable audit report"
    - path: "docs/audit/VALIDATION-REPORT.json"
      provides: "Machine-readable validation with status PASS"
      contains: "PASS"
    - path: "docs/audit/VALIDATION-REPORT.md"
      provides: "Human-readable validation report"
  key_links:
    - from: "docs/audit/AUDIT-REPORT.json"
      to: "core/intelligence/audit_layers.py"
      via: "generated by running audit script"
      pattern: "summary.*by_layer"
    - from: "docs/audit/VALIDATION-REPORT.json"
      to: "core/intelligence/validate_layers.py"
      via: "generated by running validation script"
      pattern: "summary.*status.*PASS"
---

<objective>
Remove all DELETE-classified files from the repository and regenerate both audit and validation reports to confirm a clean state: 0 REVIEW, 0 DELETE in the repo, reports reflecting the updated classifier.

Purpose: Achieve the final Phase 10 success criteria — clean audit with every file classified, no stale files remaining.
Output: 4 regenerated report files + 4 stale duplicate files removed from git
</objective>

<execution_context>
@./.claude/agents/gsd-executor.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-audit-resolution/10-01-SUMMARY.md

<analysis>
## DELETE Candidates

After Plan 10-01, the classifier properly classifies all files. But 4 stale duplicate files are still git-tracked and need removal:

| File | Status | Action |
|------|--------|--------|
| `artifacts/README 2.md` | git-tracked, DELETE | `git rm` |
| `knowledge/NAVIGATION-MAP 2.json` | git-tracked, DELETE | `git rm` |
| `knowledge/README 2.md` | git-tracked, DELETE | `git rm` |
| `knowledge/TAG-RESOLVER 2.json` | git-tracked, DELETE | `git rm` |

The 10 original DELETE items (finance-agent, talent-agent in archive/) are inside `archive/` which is now in SKIP_DIRS — they won't appear in the audit scan at all.

Their non-duplicate counterparts (artifacts/README.md, knowledge/README.md, etc.) are the canonical versions and remain in the repo.
</analysis>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove stale DELETE files and regenerate reports</name>
  <files>docs/audit/AUDIT-REPORT.json, docs/audit/AUDIT-REPORT.md, docs/audit/VALIDATION-REPORT.json, docs/audit/VALIDATION-REPORT.md</files>
  <action>
**Step 1: Remove 4 stale duplicate files from git and disk:**

```bash
git rm "artifacts/README 2.md"
git rm "knowledge/NAVIGATION-MAP 2.json"
git rm "knowledge/README 2.md"
git rm "knowledge/TAG-RESOLVER 2.json"
```

These are macOS Finder duplicates (created by copy operations) containing stale data. Do NOT remove the canonical counterparts (artifacts/README.md, etc.).

**Step 2: Regenerate audit report:**

```bash
python3 core/intelligence/audit_layers.py
```

Verify output:
- REVIEW: 0
- DELETE: 0 (archive/ DELETE items are in SKIP_DIRS, stale dups just removed)

**Step 3: Regenerate validation report:**

```bash
python3 core/intelligence/validate_layers.py --report
```

Verify output:
- Status: PASS
- Hard violations: 0
- Soft warnings (DELETE tracked): 0
- Review items tracked: 0

**Step 4: Read both JSON reports and verify fields:**

AUDIT-REPORT.json:
- `summary.by_layer.REVIEW` must be 0
- `review_needed` array must be empty
- `delete_candidates` array must be empty

VALIDATION-REPORT.json:
- `summary.status` must be "PASS"
- `summary.hard_violation_count` must be 0
- `summary.soft_violation_count` must be 0
- `summary.review_tracked_count` must be 0
  </action>
  <verify>
    <automated>python3 -c "import json; a=json.load(open('docs/audit/AUDIT-REPORT.json')); v=json.load(open('docs/audit/VALIDATION-REPORT.json')); assert a['summary']['by_layer']['REVIEW']==0, f'REVIEW={a[\"summary\"][\"by_layer\"][\"REVIEW\"]}'; assert v['summary']['status']=='PASS'; assert v['summary']['soft_violation_count']==0; assert v['summary']['review_tracked_count']==0; print('ALL CLEAN: PASS')"</automated>
  </verify>
  <done>All 4 stale files removed, audit shows 0 REVIEW and 0 DELETE, validation shows PASS with 0 violations</done>
</task>

<task type="auto">
  <name>Task 2: End-to-end verification of all Phase 10 success criteria</name>
  <files>docs/audit/AUDIT-REPORT.json, docs/audit/AUDIT-REPORT.md, docs/audit/VALIDATION-REPORT.json, docs/audit/VALIDATION-REPORT.md</files>
  <action>
Run the complete audit pipeline from scratch and verify every Phase 10 success criterion from the ROADMAP:

**Criterion 1: `audit_layers.py` produces 0 REVIEW items**

```bash
python3 core/intelligence/audit_layers.py
python3 -c "import json; d=json.load(open('docs/audit/AUDIT-REPORT.json')); print('REVIEW:', d['summary']['by_layer']['REVIEW'])"
```
Expected: `REVIEW: 0`

**Criterion 2: Every file that was REVIEW is now L1/L2/L3/NEVER/DELETE**

```bash
python3 -c "import json; d=json.load(open('docs/audit/AUDIT-REPORT.json')); print('Review needed:', len(d['review_needed']))"
```
Expected: `Review needed: 0`

**Criterion 3: All DELETE candidates removed**

```bash
test ! -f "artifacts/README 2.md" && test ! -f "knowledge/README 2.md" && test ! -f "knowledge/NAVIGATION-MAP 2.json" && test ! -f "knowledge/TAG-RESOLVER 2.json" && echo "DELETE files removed: PASS"
python3 -c "import json; d=json.load(open('docs/audit/VALIDATION-REPORT.json')); print('DELETE tracked:', d['summary']['soft_violation_count'])"
```
Expected: `DELETE files removed: PASS` and `DELETE tracked: 0`

**Criterion 4: Report regenerates cleanly (idempotent)**

```bash
python3 core/intelligence/audit_layers.py
cp docs/audit/AUDIT-REPORT.json /tmp/audit1.json
python3 core/intelligence/audit_layers.py
python3 -c "
import json
a = json.load(open('/tmp/audit1.json'))
b = json.load(open('docs/audit/AUDIT-REPORT.json'))
assert a['summary'] == b['summary'], f'Mismatch: {a[\"summary\"]} vs {b[\"summary\"]}'
print('Idempotent: PASS')
"
```
Expected: `Idempotent: PASS`

**Run spot check verification from Plan 10-01:**

```bash
python3 core/intelligence/verify_classifications.py
```
Expected: exit code 0

If any criterion fails, investigate, fix, and re-verify before marking complete.
  </action>
  <verify>
    <automated>python3 core/intelligence/audit_layers.py 2>&1 | tail -8 && python3 core/intelligence/validate_layers.py 2>&1 | tail -8 && python3 core/intelligence/verify_classifications.py</automated>
  </verify>
  <done>All 4 Phase 10 success criteria from ROADMAP verified: 0 REVIEW, every file classified, DELETEs removed, report regenerates cleanly</done>
</task>

</tasks>

<verification>
CHECK 1: python3 -c "import json; d=json.load(open('docs/audit/AUDIT-REPORT.json')); assert d['summary']['by_layer']['REVIEW'] == 0; print('AUDIT REVIEW=0: PASS')"
Expected: "AUDIT REVIEW=0: PASS"

CHECK 2: python3 -c "import json; d=json.load(open('docs/audit/VALIDATION-REPORT.json')); assert d['summary']['status']=='PASS' and d['summary']['review_tracked_count']==0 and d['summary']['soft_violation_count']==0; print('VALIDATION CLEAN: PASS')"
Expected: "VALIDATION CLEAN: PASS"

CHECK 3: test ! -f "artifacts/README 2.md" && test ! -f "knowledge/README 2.md" && echo "DELETE files gone: PASS"
Expected: "DELETE files gone: PASS"

CHECK 4: python3 core/intelligence/verify_classifications.py && echo "Spot checks: PASS"
Expected: "Spot checks: PASS"
</verification>

<success_criteria>
- Audit report: 0 REVIEW items, 0 DELETE items
- Validation report: PASS status, 0 hard violations, 0 soft warnings, 0 review tracked
- No stale duplicate files exist on disk or in git
- Reports regenerate with identical summaries (idempotent)
</success_criteria>

<output>
After completion, create `.planning/phases/10-audit-resolution/10-02-SUMMARY.md`
</output>
